{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/PRO/React JS/slackclone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"D:/PRO/React JS/slackclone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useState}from\"react\";import{auth,db}from\"../firebase\";import firebase from\"firebase\";import{Button}from\"@material-ui/core\";import{useAuthState}from\"react-firebase-hooks/auth\";import styled from\"styled-components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatInput(_ref){var channelName=_ref.channelName,channelId=_ref.channelId,chatRef=_ref.chatRef;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var sendMessage=function sendMessage(e){//permet d'eviter le raffraichissement de la page et la perte de donnée\ne.preventDefault();console.log(channelId);if(!channelId){return false;}db.collection(\"rooms\").doc(channelId).collection(\"messages\").add({message:input,timestamp:firebase.firestore.FieldValue.serverTimestamp(),user:user.displayName,userImage:user.photoURL});chatRef.current.scrollIntoView({behavior:\"smooth\",block:\"nearest\"});setInput(\"\");};return/*#__PURE__*/_jsx(ChatInputContainer,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Message #\".concat(channelName.toLowerCase()),value:input,onChange:function onChange(e){return setInput(e.target.value);},type:\"text\"}),/*#__PURE__*/_jsx(Button,{hidden:true,type:\"submit\",onClick:sendMessage,children:\"SEND\"})]})});}export default ChatInput;var ChatInputContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border-radius: 20px;\\n\\n  > form {\\n    position: relative;\\n    display: flex;\\n    justify-content: center;\\n  }\\n\\n  > form > input {\\n    position: fixed;\\n    bottom: 30px;\\n    width: 60%;\\n    border: 1px solid gray;\\n    border-radius: 3px;\\n    padding: 20px;\\n    outline: none;\\n  }\\n\\n  > form > button {\\n    display: none !important;\\n  }\\n\"])));","map":{"version":3,"sources":["D:/PRO/React JS/slackclone/src/components/ChatInput.js"],"names":["React","useState","auth","db","firebase","Button","useAuthState","styled","ChatInput","channelName","channelId","chatRef","input","setInput","user","sendMessage","e","preventDefault","console","log","collection","doc","add","message","timestamp","firestore","FieldValue","serverTimestamp","displayName","userImage","photoURL","current","scrollIntoView","behavior","block","toLowerCase","target","value","ChatInputContainer","div"],"mappings":"sUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,IAAT,CAAeC,EAAf,KAAyB,aAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,wFAEA,QAASC,CAAAA,SAAT,MAAwD,IAAnCC,CAAAA,WAAmC,MAAnCA,WAAmC,CAAtBC,SAAsB,MAAtBA,SAAsB,CAAXC,OAAW,MAAXA,OAAW,eAC5BV,QAAQ,CAAC,EAAD,CADoB,wCAC/CW,KAD+C,eACxCC,QADwC,iCAEvCP,YAAY,CAACJ,IAAD,CAF2B,gDAE/CY,IAF+C,mBAItD,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CAEzB;AACAA,CAAC,CAACC,cAAF,GACAC,OAAO,CAACC,GAAR,CAAYT,SAAZ,EAEA,GAAI,CAACA,SAAL,CAAgB,CACd,MAAO,MAAP,CACD,CAEDP,EAAE,CAACiB,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BX,SAA3B,EAAsCU,UAAtC,CAAiD,UAAjD,EAA6DE,GAA7D,CAAiE,CAC/DC,OAAO,CAAEX,KADsD,CAE/DY,SAAS,CAAEpB,QAAQ,CAACqB,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EAFoD,CAG/Db,IAAI,CAAEA,IAAI,CAACc,WAHoD,CAI/DC,SAAS,CAAEf,IAAI,CAACgB,QAJ+C,CAAjE,EAOAnB,OAAO,CAACoB,OAAR,CAAgBC,cAAhB,CAA+B,CAC7BC,QAAQ,CAAE,QADmB,CAE7BC,KAAK,CAAE,SAFsB,CAA/B,EAIArB,QAAQ,CAAC,EAAD,CAAR,CACD,CAtBD,CAuBA,mBACE,KAAC,kBAAD,wBACE,qCACE,cACE,WAAW,oBAAcJ,WAAW,CAAC0B,WAAZ,EAAd,CADb,CAEE,KAAK,CAAEvB,KAFT,CAGE,QAAQ,CAAE,kBAACI,CAAD,QAAOH,CAAAA,QAAQ,CAACG,CAAC,CAACoB,MAAF,CAASC,KAAV,CAAf,EAHZ,CAIE,IAAI,CAAC,MAJP,EADF,cAOE,KAAC,MAAD,EAAQ,MAAM,KAAd,CAAe,IAAI,CAAC,QAApB,CAA6B,OAAO,CAAEtB,WAAtC,kBAPF,GADF,EADF,CAeD,CAED,cAAeP,CAAAA,SAAf,CAEA,GAAM8B,CAAAA,kBAAkB,CAAG/B,MAAM,CAACgC,GAAV,uaAAxB","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport { auth, db } from \"../firebase\";\r\nimport firebase from \"firebase\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport styled from \"styled-components\";\r\n\r\nfunction ChatInput({ channelName, channelId, chatRef }) {\r\n  const [input, setInput] = useState(\"\");\r\n  const [user] = useAuthState(auth);\r\n\r\n  const sendMessage = (e) => {\r\n\r\n    //permet d'eviter le raffraichissement de la page et la perte de donnée\r\n    e.preventDefault();\r\n    console.log(channelId);\r\n\r\n    if (!channelId) {\r\n      return false;\r\n    }\r\n\r\n    db.collection(\"rooms\").doc(channelId).collection(\"messages\").add({\r\n      message: input,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      user: user.displayName,\r\n      userImage: user.photoURL,\r\n    });\r\n\r\n    chatRef.current.scrollIntoView({\r\n      behavior: \"smooth\",\r\n      block: \"nearest\",\r\n    });\r\n    setInput(\"\");\r\n  };\r\n  return (\r\n    <ChatInputContainer>\r\n      <form>\r\n        <input\r\n          placeholder={`Message #${channelName.toLowerCase()}`}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          type=\"text\"\r\n        />\r\n        <Button hidden type=\"submit\" onClick={sendMessage}>\r\n          SEND\r\n        </Button>\r\n      </form>\r\n    </ChatInputContainer>\r\n  );\r\n}\r\n\r\nexport default ChatInput;\r\n\r\nconst ChatInputContainer = styled.div`\r\n  border-radius: 20px;\r\n\r\n  > form {\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  > form > input {\r\n    position: fixed;\r\n    bottom: 30px;\r\n    width: 60%;\r\n    border: 1px solid gray;\r\n    border-radius: 3px;\r\n    padding: 20px;\r\n    outline: none;\r\n  }\r\n\r\n  > form > button {\r\n    display: none !important;\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}